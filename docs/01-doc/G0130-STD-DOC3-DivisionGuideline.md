# 分冊（Volume）方式・汎用ファイル名規則（末尾番号方式 / Final Draft）

本書は DocFoundary における **大規模 Markdown 文書の分冊（Volume）方式** のうち、 従来方式（文書コード直後に番号を置く）をアップデートし、 **末尾番号方式（Title の直後に Vol 番号を付与する方式）** を正式案として定義する。

単一ファイル文書との整合性、直感的な可読性、シリーズ構造の明示性に優れ、 将来の拡張性も高い方式である。

---

## 1. 基本原則（Core Principles）

### ★ Front Matter に関する原則（明確化 / MUST）

* **すべての分冊ファイル（00および Vol01〜VolNN）は CreativeWork 9キーの Front Matter を持たなければならない（MUST）。**
* **各分冊は 1つの独立した CreativeWork として成立する必要があるため、Front Matter は必須であり省略不可（MUST NOT omit）。**
* **00番と各Volは、identifier／name／description を巻ごとに固有の値へ設定しなければならない（MUST）。**
* **改訂履歴は 00番専用とし、Vol側の Front Matter に含めてはならない（MUST NOT）。**

※ この原則は DocFoundary の "1ファイル＝1CreativeWork" の基本設計に基づき、分冊文書の機械可読性・CI検証・メタデータ一貫性を保証するための必須要件である。

* 分冊（Volume）は **実ファイルとして作成する（MUST）**。
* 分冊番号は **00 から始まる 2 桁整数**（00, 01, 02…）。
* 番号は **タイトルの末尾に付与する**（本方式の最大特徴）。
* **00番ファイルは総合編（Index）** とし、本文を持たない（MUST）。
* Vol01 以降は本文のみを持ち、参照文書・改訂履歴を記載しない（MUST NOT）。
* Volume 構造は **任意項目（optional）** とし、単一文書は番号なしで完結できる。
* 行数基準は従来通り **200行推奨（SHOULD）／300行上限（MUST）** を適用。

---

## 2. 末尾番号方式のファイル名規則（Naming Convention）

### 2.4 Volファイルの `name` 表記方式（正式採用 / MUST）

分冊（Volume）ファイルの Front Matter における `name` は、以下の日本語表記形式を必ず用いる（MUST）。

```
{日本語正式タイトル} 第N巻（第X,Y,Z章）
```

#### 例

* `ドキュメント書式標準 第1巻（第1,2,3章）`
* `ドキュメント書式標準 第2巻（第4,5,6章）`
* `ドキュメント書式標準 第3巻（附録A）`
* `ドキュメント書式標準 第4巻（第7章,附録A）`

#### 仕様要点

* 章は **列挙形式（第1,2,3章）** を用いる（MUST）。
* 連続章・非連続章の双方に対応する。
* 附録は `附録A` の形式で列挙できる。
* 人間可読性を最優先し、日本語自然文として成立させる（MUST）。
* 英数字略号（c1–c3 等）は `name` には使用しない（MUST NOT）。

### 2.1 基本フォーマット

```
{Prefix}{4桁番号}-{カテゴリ3}-{文書4}-{タイトル}-{Vol番号2桁}.md
```

**例：G0100-STD-DOC0-FormatPolicy-01.md**

### 2.2 定義

* Prefix：`G`（汎用） or `P`（プロジェクト）
* Title：ASCII英字＋ハイフン、UpperCamelCase 推奨
* Vol番号：00＝総合編、01〜＝本編

### 2.3 非分割文書（番号なし）

```
G0300-ARC-DES0-ApiDesign.md
```

→ Vol番号を持たず、単一で完結する（MUST）。

---

## 3. ファイル名例（G0100-STD-DOC0-FormatPolicyy）

### 末尾番号方式

```
G0100-STD-DOC0-FormatPolicy-00.md   ← 総合編
G0100-STD-DOC0-FormatPolicy-01.md   ← 第1巻（1〜3章）
G0100-STD-DOC0-FormatPolicy-02.md   ← 第2巻（4〜6章）
G0100-STD-DOC0-FormatPolicy-03.md   ← 第3巻（附録）
```

すべてのファイルが **共通タイトル（FormatPolicy）を先頭に保持** し、 シリーズの一体感と可読性が高い。

---

## 4. 00番ファイル（総合編 / Index）の役割（MUST）

* Front Matter（CreativeWork 9キー）
* H1タイトル
* **Vol → 章 → 節** の3階層目次
* 参照文書
* 改訂履歴
* 本文を保持しない（MUST NOT）

---

## 5. Vol01 以降の構造

* Front Matter（CreativeWork 9キー）
* Volタイトル（H1）
* 収録章一覧
* 本文（該当章）
* 改訂履歴・参照文書は含めない（MUST NOT）

---

## 6. 行数基準（Markdown / コード共通）

* 標準：**200行（SHOULD）**
* 上限：**300行（MUST）**
* 章途中での分割は禁止（MUST NOT）
* コードの場合はクラス／関数単位に従う

---

## 7. 分割の決定手順

1. 文書を章単位で行数カウント
2. Vol01 に順次追加
3. 200行超で次巻へ（ただし章途中は禁止）
4. Vol02, Vol03…を作る

---

## 8. CI／Lint 推奨ルール

* 300行超過検査
* 章境界での分割チェック
* Front Matter の CreativeWork 9キーを検証
* identifier とファイル名の一致
* 00番の目次（3階層）との整合性
* Vol内に参照文書・改訂履歴が無いこと
* ASCII英数字＋ハイフンのみ構成

---

## 9. 末尾番号方式のメリット

* **非分割文書との整合性が非常に高い（最大の利点）**
* 分冊番号が optional となり、自然言語として直感的
* Title が常に先頭に来るため、読み手に優しい
* 将来の後付け Vol 拡張が容易
* ソート順が正しく安定する（共通タイトルで揺らぎなし）
* 巻構造が完全にシリーズ化され、グループとして識別しやすい

---

## 10. 分割不要文書の扱い（Non-Divided Documents）

* 行数が基準内（200〜300行）なら単一ファイルで完結（MUST）。
* Vol番号は付けない（MUST）。
* 00番も作成しない（MUST）。
* 将来分冊が必要になった場合のみ、Vol方式へ移行可能（SHOULD）。

---

以上が **末尾番号方式に基づく分冊（Volume）方式の最終仕様案** です。
