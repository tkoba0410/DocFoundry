---

schema: "[https://schema.org/CreativeWork](https://schema.org/CreativeWork)"
@type: "CreativeWork"
identifier: "G0410-STD-YML1-LayerModel"
name: "YAML構造三層モデル標準（YML1: YAML Layer Model Standard）"
version: "v1.0.0"
datePublished: "2025-11-07"
status: "Draft"
inLanguage: ["ja"]
creator:
@type: "Organization"
name: "Documentation Team"
description: "YAML, JSON Schema, Schema.org の三層による文書内容構造モデルを定義し、文書の意味・形式・内容整合を体系的に確立する。運用・検証は含まない。"
---------------------------------------------------------------------------------------------------

# [STD-YAML-LayerModel] YAML構造三層モデル標準（v1.0.0 / Draft）

> 本標準は、文書内容の構造を **YAML（データ）・JSON Schema（形式）・Schema.org（意味）** の三層に分離して定義する。
> 文書の「中身」を体系的にモデル化し、あらゆる構造化文書で揺らぎなく再現可能とすることを目的とする。
> **運用・検証手順・CI設定等は含まない。**

---

## 1. 目的と適用範囲

### 1.1 目的

YAML文書を中核とした構造化ドキュメント体系において、
その**内容（Content）をどのように設計・記述・意味付けするか**を統一するための三層モデルを定義する。

### 1.2 適用範囲

* 対象：標準文書・仕様書・定義書など、構造を持つすべての文書。
* 非対象：運用・CI・自動検証・公開管理。これらは別規約（G0110）で扱う。

---

## 2. 三層アーキテクチャ概要

文書内容は、次の三層によって構成される。

| 層   | 名称                        | 技術基盤                | 主な責務             | 出力例                        |
| --- | ------------------------- | ------------------- | ---------------- | -------------------------- |
| 第1層 | **データ層（Data Layer）**      | YAML                | 実際の値・記述・人間可読性    | 仕様・要件・制約の記述                |
| 第2層 | **形式層（Structural Layer）** | JSON Schema 2020-12 | 型・必須項目・パターン・依存関係 | スキーマファイル                   |
| 第3層 | **意味層（Semantic Layer）**   | Schema.org          | 文書の意味・語彙・概念構造    | `@type: CreativeWork` 等の定義 |

> 各層は相互に依存し、**Schema.org → JSON Schema → YAML** の方向に意味と形式を伝達する。

---

## 3. 各層の責務定義

### 3.1 データ層（YAML）

* 構造化データの保持・人間可読な表現。
* 順序・インデント・配列構造を維持し、値の揺らぎを抑制する。
* 書式（文字コード・改行・インデント）等はFormat Policy（G0100）に従う。

### 3.2 形式層（JSON Schema）

* YAML文書における構造・型・制約・必須項目を厳格に定義。
* 構文・構造の一貫性を保証する技術的中核。
* `additionalProperties: false`、`pattern`、`enum`などを活用して構造揺らぎを防止。

### 3.3 意味層（Schema.org）

* 文書の意味的同定を担う。
* `@type`, `identifier`, `name`, `creator` など、語彙の意味を共通化。
* CreativeWorkを基本型とし、必要に応じて TechArticle / SoftwareApplication 等を派生利用。

---

## 4. 層間依存関係

```
[Schema.org] ─ 意味定義（語彙と@type）
      ↓
[JSON Schema] ─ 型・構造制約（形式仕様）
      ↓
[YAML] ─ 実体データ（内容記述）
```

* **意味層（Schema.org）** は語彙体系を規定し、
* **形式層（JSON Schema）** が構造的制約を与え、
* **データ層（YAML）** がその結果として実際の文書内容を保持する。

---

## 5. 揺らぎ分類と抑止設計

| 区分    | 層           | 揺らぎの内容          | 設計上の抑止手段                      |
| ----- | ----------- | --------------- | ----------------------------- |
| 表記揺らぎ | YAML        | インデント・改行・順序の差異  | YAML構文規約（G0100）準拠・canonical出力 |
| 構造揺らぎ | JSON Schema | キー欠落・型不一致・順序誤り  | 必須キー定義・正規表現・enum              |
| 意味揺らぎ | Schema.org  | @typeの不整合・語彙の誤用 | Profile定義・CreativeWork準拠      |

> 本標準ではこれらの**設計段階での防止原理**のみを定義し、
> 実際の検証・自動化は運用層（G0110）で扱う。

---

## 6. 内容設計の原則

### 6.1 一意性

すべての識別子（identifier, id）は体系内で一意でなければならない（MUST）。

### 6.2 整列性

セクション（objectives, requirements, constraints）は論理順序を持ち、
意図しない入れ替えを防ぐ構造設計を行う（SHOULD）。

### 6.3 階層化

各要素は階層的に構成され、同一階層内での意味重複を避ける（MUST）。

### 6.4 互換性

Schemaの更新はSemantic Versioning 2.0.0に従い、
major更新は互換非保証、minor更新は後方互換維持とする。

---

## 7. 関連標準

| 文書ID                             | 名称           | 関係           |
| -------------------------------- | ------------ | ------------ |
| G0100-STD-DOC0-FormatPolicy      | 文書構造・書式規約    | 上位（形式基盤）     |
| G0400-STD-YAM0-ContentStructure  | YAML文書内容構造標準 | 下位（実装仕様）     |
| G0110-STD-DOCO-OperationalPolicy | 文書運用・保守規約    | 補助（検証運用は別建て） |

---

## 8. 固定・統一原則（必要十分範囲）

> 本章は、文書構造における揺らぎを最小化するための**必要最小限の固定原則**を定義する。詳細な運用・制約強化・禁止事項は別文書または後続版にて扱う。

### 8.1 データ層（YAML / Data Layer）

| 項目       | 規定値/形式                                    | 目的        |
| -------- | ----------------------------------------- | --------- |
| 文字コード/改行 | UTF-8 / LF                                | 解析の一貫性    |
| インデント    | 半角スペース2固定                                 | 可読性・差分安定  |
| キー書式     | snake_case                                | G0400との整合 |
| セクション順   | objectives → requirements → constraints   | 意味順序固定    |
| 言語       | in_language: ["ja"] または ["ja","en"]（配列形式） | 単値禁止      |

### 8.2 形式層（JSON Schema / Structural Layer）

| 項目      | 規定値/形式                                                                                         | 目的      |
| ------- | ---------------------------------------------------------------------------------------------- | ------- |
| $schema | "[https://json-schema.org/draft/2020-12/schema](https://json-schema.org/draft/2020-12/schema)" | バージョン固定 |
| 追加プロパティ | additionalProperties: false（unevaluatedProperties: false 推奨）                                   | 余剰キー排除  |
| バージョン形式 | ^v\d+.\d+.\d+$                                                                                 | 一意の解釈   |
| 日付形式    | format: date（YYYY-MM-DD）                                                                       | 解析一貫    |
| 言語      | 配列+BCP47簡易正規表現 ^[a-z]{2}(-[A-Z]{2})?$                                                          | 値揺らぎ防止  |
| セクション   | 配列＋順序（objectives→requirements→constraints）                                                     | 構造一貫    |

### 8.3 意味層（Schema.org / Semantic Layer）

| 項目         | 規定値/形式                                          | 目的      |
| ---------- | ----------------------------------------------- | ------- |
| @type      | CreativeWork                                    | 意味の基底統一 |
| identifier | G体系識別子形式                                        | 横断リンク安定 |
| creator    | JSON-LD構造（@type: Person または Organization, name） | 意味明確化   |
| inLanguage | 配列（["ja"] など）                                   | 解釈一義化   |

### 8.4 同義語の統一（Normalization of Synonyms）

| 意味  | 採用キー                                                      | 非推奨キー             |
| --- | --------------------------------------------------------- | ----------------- |
| 作成者 | creator                                                   | author, editor    |
| 説明  | description                                               | summary, abstract |
| 発行日 | Schema.org層: datePublished / YAML・Schema層: date_published | published         |

> 上記以外の選択肢・派生語彙は将来版または付録で明示的に定義する。

---

## 9. 設計上の柔軟性（Design Flexibility）

> 本標準は揺らぎを最小化することを目的とするが、創造的記述・拡張語彙・試験的構造を禁止するものではない。以下の原則を満たす限り、限定的な表現の幅（Safe Play Range）を許容する。

### 9.1 安全なあそび（Safe Play Range）原則

1. **意味の同一性を損なわないこと** — 語彙の意味・解釈を変えない。
2. **構造互換性を維持すること** — スキーマ検証で整合が保たれる。
3. **後方互換性を保つこと** — 既存文書が不整合を起こさない。

### 9.2 許容例

* YAML書式上の差異（改行・コメント・インライン配列）
* CreativeWorkの派生型（TechArticleなど）の追加採用
* JSON Schemaにおけるオプションキーの追加（必須変更を伴わない場合）

### 9.3 非許容例

* 意味を反転させる変更（must⇄may など）
* 構造順序・必須項目の削除や入れ替え
* Schema.org語彙を独自定義で上書きする行為

> この柔軟性の範囲は、将来的な拡張や外部プロファイル連携を可能にするための余白である。文書の解釈と構造整合を損なわない限りにおいてのみ利用可能とする。

---

## 改訂履歴

| 版      | 日付           | 内容                                                                 |
| ------ | ------------ | ------------------------------------------------------------------ |
| v1.0.0 | "2025-11-07" | 初版作成。三層モデル（YAML / JSON Schema / Schema.org）を定義。運用要素を含まない独立標準として策定。 |
