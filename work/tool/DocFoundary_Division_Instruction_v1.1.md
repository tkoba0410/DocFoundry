# DocFoundary 文書分割指示書 v1.1（判断エスカレーション付き）

本指示書は、DocFoundary 標準文書を分冊（Volume）構造へ移行する際の判断基準と作業手順を定めるものである。  
**判断を伴う作業については必ずレビュー担当に確認を行うこと（MUST）。**

---

## 1. 分割判断（Unified 基準）

以下のいずれかを満たした場合、Volume 分割を適用する（MUST）。

| 項目 | 基準 | 結果 |
|------|------|------|
| トークン数 | **3000 tokens 超** | 分割必須 |
| 行数 | **300 行超** | 分割必須 |

### チェック
- [ ] tokens = ______  
- [ ] lines = ______  
- [ ] 基準超過 → **分割必須**

---

## 2. 分割方式（末尾番号方式 / MUST）

- `{Prefix}{番号}-{カテゴリ}-{文書}-{タイトル}-{Vol番号}.md`
- Vol00＝Index、Vol01〜＝本文

### 判断が必要な場合（ASK）
- タイトルにハイフンが多い
- Prefix の選択（G or P）

---

## 3. Vol00 / Vol01+ の構成

### Vol00（Index）
- 本文なし（MUST NOT）
- 目次・改訂履歴・参照文書のみ

### Vol01+
- 本文のみ  
- 改訂履歴・参照文書なし（MUST NOT）

---

## 4. 分割単位（章単位 / MUST）

### 原則
- 分割は章単位（MUST）
- 章途中での分割は禁止（MUST NOT）
- コードはクラス／関数単位を維持（MUST）

### 判断が必要な場合（ASK）
- 章が巨大で単体で基準超え  
- 章が極端に短い  
- Vol間のバランス調整が必要  

---

## 5. Vol番号の割り振り

### 基本ルール
| Vol | 内容 |
|-----|------|
| 00 | Index |
| 01〜NN | 本編 |

### 判断が必要な場合（ASK）
- 附録の扱い（独立 or 巻に含める）  
- 第1章が巨大で Vol01 が厚くなる  

---

## 6. Front Matter（CreativeWork 9キー）

### 必須（MUST）
- identifier / name / description を巻ごとに固有にする

### 判断が必要な場合（ASK）
- description をどこまで変えるか  
- version を統一 or 巻別にするか  

---

## 7. Volファイルの name 記述

```
{日本語正式タイトル} 第N巻（第X,Y,Z章）
```

### 判断が必要な場合（ASK）
- 序章・0章の扱い  
- 附録の範囲  
- name に含める章範囲の決定  

---

## 8. 分割不要文書

- 基準内なら単一ファイル（MUST）  
- Vol番号なし（MUST）  
- Vol00 不要（MUST）

### 判断が必要な場合（ASK）
- tokens/lines がぎりぎり  
- 将来増加を見越して Volume 化したい  

---

## 9. 最終チェックリスト

### 技術項目
- [ ] tokens / lines 判定済み  
- [ ] 章単位で分割  
- [ ] ファイル名規則 OK  
- [ ] Front Matter 完備  

### 判断が必要なら ASK
- [ ] Vol間のバランス  
- [ ] name の章範囲  
- [ ] 附録の扱い  
- [ ] Vol00 の構造  
- [ ] 再編が必要に見える  

---

この指示書は、文書の分割判断を確実にし、曖昧性が生じた際に必ず確認を行うことを目的とする。
